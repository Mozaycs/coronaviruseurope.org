(this["webpackJsonpcoronaviruseurope.org"]=this["webpackJsonpcoronaviruseurope.org"]||[]).push([[0],{190:function(e,t){},238:function(e,t,a){e.exports=a.p+"static/media/canada-provinces.386fab57.geojson"},239:function(e,t,a){e.exports=a.p+"static/media/china-provinces.cf89f442.geojson"},261:function(e,t,a){e.exports=a.p+"static/media/us-states.3fa0f7b5.geojson"},285:function(e,t,a){e.exports=a(415)},290:function(e,t,a){},292:function(e,t,a){},296:function(e,t,a){},411:function(e,t){},415:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),i=a.n(o),c=(a(290),a(185)),l=a.n(c),s=a(134),u=a(236),d=a(50),m=(a(291),a(292),a(186)),v=a(159),p=a(191),f=a(137),g=a.n(f),b=["USA","CAN","CHN","TWN"],h=g.a.scale(["#fefee9","#6c0101"]),E=[0,0,0,0],j=function(e,t,a,n,r,o){if("country"===r||!e[n])return E;var i=e[n].provinces;if(i[o]&&i[o][a]>0){var c=i[o][a];return[].concat(Object(p.a)(h(c/t).rgb()),[150])}return E},y=function(e,t,a,n){if(e.object){var r=e.x,o=e.y,i=e.object.properties,c=i.iso3,l=i.name,s=a[c].provinces;if("CHN"===c&&"Taiwan"===l)return t({data:a.TWN,x:r,y:o,id:l,name:c});if(!s[l])return t(null);t({data:s[l],x:r,y:o,id:l,name:c})}else t(null)},w=a(238),C=a.n(w),O=a(239),k=a.n(O),x=a(240),S=a(430),N=a(432),z=a(434),I=a(265),U=a(241),F=a(437),H=a(433),A=a(436),B=a(431),D=a(440),R=a(439),T=a(242),V=a.n(T);a(296);function W(e){var t=e.globalData,a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)("active"),s=Object(d.a)(l,2),u=s[0],m=s[1],v={active:0,confirmed:0,recovered:0,deaths:0},p=Object.entries(t).map((function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];return v.confirmed+=n.confirmed,v.active+=n.active,v.recovered+=n.recovered,v.deaths+=n.deaths,Object(U.a)({},n,{iso3:a})})).sort((function(e,t){return t[u]-e[u]})),f=Object.keys(v);if(i)return r.a.createElement(F.a,{onClick:function(){return c(!1)},className:"minimized-button",icon:r.a.createElement(D.a,null),size:"large"});var g=r.a.createElement(F.a,{onClick:function(){return c(!0)},type:"link",icon:r.a.createElement(R.a,null),style:{color:"rgba(0, 0, 0, 0.45)"}});return r.a.createElement(H.a,{title:"Global Stats",className:"stats-panel",extra:g},r.a.createElement("div",{className:"stats-group"},f.map((function(e){return r.a.createElement("div",{className:"stats-wrapper",onClick:function(){return m(e)},key:e},r.a.createElement(A.a,{className:u===e&&"activeMetric",title:e,value:v[e]}))}))),r.a.createElement(B.a,{className:"stats-list",dataSource:p,renderItem:function(e){return r.a.createElement(B.a.Item,{className:"stats-list-item"},e.countryRegion,r.a.createElement("span",null,V()(e[u]).format("0,0")))}}))}var G=a(261),M=a.n(G),J=a(187),P=a.n(J),Z=a(157),q={longitude:0,latitude:26,zoom:2,pitch:0,bearing:0},L=["provinceState","countryRegion","lastUpdate","lat","long","confirmed","recovered","deaths","active"],Q=["confirmed","recovered","deaths","active"],$=g.a.scale(["#fefee9","#6c0101"]),_=Array.apply(null,Array(10)).map((function(e,t){return $(t/10)}));var K=function(){var e=Object(n.useState)(),t=Object(d.a)(e,2),a=(t[0],t[1]),o=Object(n.useState)(),i=Object(d.a)(o,2),c=i[0],f=i[1],g=Object(n.useState)({}),w=Object(d.a)(g,2),O=w[0],U=w[1],F=Object(n.useState)(),H=Object(d.a)(F,2),A=H[0],B=H[1],D=Object(n.useState)("active"),R=Object(d.a)(D,2),T=R[0],V=R[1],G=Object(n.useState)("province"),J=Object(d.a)(G,2),$=J[0],K=J[1],X=Object(n.useState)(1e3),Y=Object(d.a)(X,2),ee=Y[0],te=Y[1];Object(n.useEffect)((function(){I.a.initialize("UA-162018035-1"),function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(new Date).valueOf(),e.next=4,Promise.all([P.a.get("".concat("https://raw.githubusercontent.com/haxzie/covid19-layers-api/master/data/layers/geo.json","?ts=").concat(t)),P.a.get("https://covid19.mathdro.id/api/confirmed")]);case 4:a=e.sent,n=Object(d.a)(a,2),r=n[0].data,o=n[1].data,i={},o.forEach((function(e){var t=i[e.iso3];t?(Q.forEach((function(a){t[a]+=e[a]})),e.lastUpdate>t.lastUpdate&&(t.lastUpdate=e.lastUpdate),t.provinces[e.provinceState]=Object(Z.pick)(e,L)):(i[e.iso3]=Object(Z.pick)(e,["countryRegion","lastUpdate","confirmed","recovered","deaths","active"]),i[e.iso3].provinces=Object(s.a)({},e.provinceState,Object(Z.pick)(e,L)))})),window.globalDataMap=i,console.log(i),U(i),f(r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var ae=[new N.a({id:"countries-geo-json",data:c,highlightColor:[0,0,0,50],autoHighlight:!0,getFillColor:function(e){return function(e,t,a,n,r){if("province"===r&&b.includes(n))return E;if(e[n]&&e[n][a]>0){var o=e[n][a];return[].concat(Object(p.a)(h(o/t).rgb()),[150])}return E}(O,ee,T,e.id,$)},updateTriggers:{getFillColor:[O,T,$]},pickable:!0,onHover:function(e){return function(e,t,a,n){if(e.object){var r=e.x,o=e.y,i=e.object,c=i.id,l=i.properties;if("province"===n&&b.includes(c))return t(null);var s=a[c];t({name:l.name,data:s,id:c,x:r,y:o})}else t(null)}(e,B,O,$)},onClick:function(e){console.log("clicked:",e),console.log("country data:",O[e.object.id])}}),new N.a({id:"us-states-geo-json",data:M.a,highlightColor:[0,0,0,50],autoHighlight:!0,visible:"province"===$,getFillColor:function(e){return j(O,ee,T,"USA",$,e.properties.name)},updateTriggers:{getFillColor:[O,T,$]},pickable:!0,onHover:function(e){return y(e,B,O)},onClick:function(e){console.log("clicked:",e)}}),new N.a({id:"canada-provinces-geo-json",data:C.a,highlightColor:[0,0,0,50],autoHighlight:!0,visible:"province"===$,getFillColor:function(e){return j(O,ee,T,"CAN",$,e.properties.name)},updateTriggers:{getFillColor:[O,T,$]},pickable:!0,onHover:function(e){return y(e,B,O)},onClick:function(e){console.log("clicked:",e)}}),new N.a({id:"china-provinces-geo-json",data:k.a,highlightColor:[0,0,0,50],autoHighlight:!0,visible:"province"===$,getFillColor:function(e){return j(O,ee,T,"CHN",$,e.properties.name)},updateTriggers:{getFillColor:[O,T,$]},pickable:!0,onHover:function(e){return y(e,B,O)},onClick:function(e){console.log("clicked:",e)}})];return r.a.createElement("div",null,r.a.createElement("div",{style:{margin:"1rem",position:"absolute",zIndex:2}},r.a.createElement(z.a.Group,{value:T,onChange:function(e){return V(e.target.value)},style:{marginBottom:"1rem",marginRight:"1rem",whiteSpace:"nowrap"}},r.a.createElement(z.a.Button,{value:"active"},"Active"),r.a.createElement(z.a.Button,{value:"confirmed"},"Confirmed"),r.a.createElement(z.a.Button,{value:"deaths"},"Deaths"),r.a.createElement(z.a.Button,{value:"recovered"},"Recovered")),r.a.createElement(z.a.Group,{value:$,onChange:function(e){var t=e.target.value;K(t),te("country"===t?15e3:1e3)}},r.a.createElement(z.a.Button,{value:"country"},"Country"),r.a.createElement(z.a.Button,{value:"province"},"Province"))),r.a.createElement(S.a,{initialViewState:q,controller:!0,layers:ae,Style:{width:"100vw",height:"100vh"},ContextProvider:v.c.Provider},r.a.createElement(v.b,{ref:a,width:"100%",height:"100%",mapboxApiAccessToken:"pk.eyJ1IjoiamFzb24tZmVuZyIsImEiOiJjazdyeWJwNGMwNG1mM2hsOGRna2FjZDZwIn0.9VnUs6uEsVOnw_WqMUwQVg",mapStyle:"mapbox://styles/jason-feng/ck7ryfd7y00xd1jqkfxb237mx"}),r.a.createElement("div",{style:{position:"absolute",right:"1rem",bottom:"6rem",zIndex:10}},r.a.createElement(v.a,{showCompass:!1}))),function(){if(!A)return null;var e=A.x,t=A.y,a=A.name,n=A.id,o=A.data,i=(o=void 0===o?{}:o).confirmed,c=void 0===i?0:i,l=o.deaths,s=void 0===l?0:l,u=o.recovered,d=void 0===u?0:u,v=o.active,p=void 0===v?0:v,f=o.lastUpdate,g=void 0===f?null:f;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.BrowserView,null,r.a.createElement("div",{style:{position:"fixed",zIndex:5,pointerEvents:"none",left:e,top:t,backgroundColor:"white",padding:"1rem",borderRadius:"4px",minWidth:"200px"}},r.a.createElement("h2",{style:{margin:"0 0 1rem 0"}},a," - ",n),r.a.createElement("div",null,"active: ",p),r.a.createElement("div",null,"confirmed: ",c),r.a.createElement("div",null,"deaths: ",s),r.a.createElement("div",null,"recovered: ",d),g&&r.a.createElement("div",null,"last update: ",new Date(g).toLocaleString()))),r.a.createElement(m.MobileView,null,r.a.createElement("div",{style:{position:"absolute",zIndex:5,left:"1rem",right:"1rem",bottom:"1rem",backgroundColor:"white",padding:"1rem",borderRadius:"4px"}},r.a.createElement("h2",{style:{margin:"0 0 1rem 0"}},a," - ",n),r.a.createElement("div",null,"active: ",p),r.a.createElement("div",null,"confirmed: ",c),r.a.createElement("div",null,"deaths: ",s),r.a.createElement("div",null,"recovered: ",d),g&&r.a.createElement("div",null,"last update: ",new Date(g).toLocaleString()))))}(),r.a.createElement(W,{globalData:O}),r.a.createElement("div",{style:{zIndex:3,position:"absolute",bottom:"1.5rem",right:"1rem",width:"250px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",null,"0"),r.a.createElement("span",null,"number of ",T," cases"),r.a.createElement("span",null,ee)),r.a.createElement(x.Colorscale,{colorscale:_,onClick:function(){},width:"150px"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[285,1,2]]]);
//# sourceMappingURL=main.70b1a611.chunk.js.map